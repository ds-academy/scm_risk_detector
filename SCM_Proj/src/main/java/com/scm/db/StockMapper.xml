<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="com.scm.db.StockMapper">

    <!-- 회사 코드별 주식 종가 데이터 조회 (그래프용) -->
    <select id="getClosePriceByCompany" parameterType="String" resultType="com.scm.model.StockDTO">
        SELECT CLOSE, DATE
        FROM STOCK_PRICE
        WHERE COMPANY_CODE = #{COMPANY_CODE}
        ORDER BY DATE DESC
        LIMIT 8;
    </select>

	<select id="getKospiClose" resultType="double">
    SELECT CLOSE
    FROM STOCK_PRICE
    WHERE COMPANY_CODE = 'KS11'
    ORDER BY DATE DESC
    LIMIT 1
</select>

<select id="getKosdaqClose" resultType="double">
    SELECT CLOSE
    FROM STOCK_PRICE
    WHERE COMPANY_CODE = 'KQ11'
    ORDER BY DATE DESC
    LIMIT 1
</select>

<select id="getSP500Close" resultType="double">
    SELECT CLOSE
    FROM STOCK_PRICE
    WHERE COMPANY_CODE = '^GSPC'
    ORDER BY DATE DESC
    LIMIT 1
</select>


    <!-- 코스피 지수 최근 7일 -->
    <select id="getKospiIndex" resultType="com.scm.model.StockDTO">
        SELECT CLOSE, DATE
        FROM STOCK_PRICE
        WHERE COMPANY_CODE = '^TNX'
        ORDER BY DATE DESC
        LIMIT 7
    </select>

    <!-- 거래량 최근 7일 -->
    <select id="getKospiVolume" resultType="com.scm.model.StockDTO">
        SELECT VOLUME, DATE
        FROM STOCK_PRICE
        WHERE COMPANY_CODE = '^TNX'
        ORDER BY DATE DESC
        LIMIT 7
    </select>
	
</mapper>
